@* Partial: Recovery Panel *@
<div id="recoveryPanel" class="hidden">

    <div class="text-center">
        <h2 class="text-lg font-bold text-slate-900 sm:text-xl dark:text-white">Account recovery</h2>
        <p class="mt-2 text-sm text-slate-600 sm:text-base dark:text-slate-300">
            Choose an option below to regain access.
        </p>
    </div>

    <div class="mt-6 space-y-4">

        <!-- OPTION 1 -->
        <div class="rounded-xl border border-slate-200 bg-white p-4 sm:p-5 dark:border-slate-700 dark:bg-slate-900">

            <div class="flex min-w-0 items-start justify-between gap-3">
                <div class="min-w-0">
                    <div class="text-sm font-semibold text-slate-900 sm:text-base dark:text-white">
                        Use a recovery code
                    </div>
                </div>

                <!-- SMALLER BADGE -->
                <span class="inline-flex items-center rounded-full border border-slate-200
                             bg-slate-50 px-3 py-1.5
                             text-xs font-medium tracking-wide whitespace-nowrap
                             text-slate-600
                             sm:px-3.5 sm:py-1.5 sm:text-sm
                             dark:border-slate-700 dark:bg-slate-800 dark:text-slate-300">
                    Recommended
                </span>
            </div>

            <!-- description moved to its own row (prevents being cut by badge on mobile) -->
            <div class="mt-2 text-xs text-slate-600 sm:text-sm dark:text-slate-300">
                Enter a <span class="font-medium text-slate-800 dark:text-slate-100">one-time code</span>
                saved when enabling 2FA.
            </div>

            <div class="mt-4">

                <label for="recoveryCode"
                       class="block text-sm font-medium text-slate-700 dark:text-slate-200">
                    Recovery code
                </label>

                <input id="recoveryCode"
                       inputmode="text"
                       placeholder="XXXX-XXXX-XXXX-XXXX"
                       oninput="this.value=this.value.toUpperCase().replace(/[^A-Z0-9-]/g,'').slice(0,19)"
                       class="mt-2 w-full rounded-lg border border-slate-200 bg-white px-4 py-3 text-sm
                              text-slate-900 transition-colors outline-none
                              focus:border-subgreen-500 focus:ring-2 focus:ring-subgreen-500
                              sm:py-3.5 dark:border-slate-700 dark:bg-slate-900
                              dark:text-slate-100 dark:focus:border-subgreen-400 dark:focus:ring-subgreen-400" />

                <!-- Error Message -->
                <div id="recoveryError" class="mt-3 hidden bg-red-50 px-4 py-3 rounded-md flex items-center border border-red-200">
                    <svg viewBox="0 0 24 24" class="text-red-600 w-4 h-4 mr-2.5 flex-shrink-0">
                        <path fill="currentColor"
                              d="M11.983,0a12.206,12.206,0,0,0-8.51,3.653A11.8,11.8,0,0,0,0,12.207,11.779,11.779,0,0,0,11.8,24h.214A12.111,12.111,0,0,0,24,11.791h0A11.766,11.766,0,0,0,11.983,0ZM10.5,16.542a1.476,1.476,0,0,1,1.449-1.53h.027a1.527,1.527,0,0,1,1.523,1.47,1.475,1.475,0,0,1-1.449,1.53h-.027A1.529,1.529,0,0,1,10.5,16.542ZM11,12.5v-6a1,1,0,0,1,2,0v6a1,1,0,1,1-2,0Z">
                        </path>
                    </svg>
                    <span class="text-red-700 text-xs" id="recoveryErrorText"></span>
                </div>

                <button type="button"
                        id="recoveryVerifyBtn"
                        onclick="verifyRecoveryCode()"
                        class="mt-4 flex w-full items-center justify-center gap-2 rounded-lg
                               bg-subgreen-500
                               px-4 py-3 text-sm font-semibold text-white shadow-sm transition
                               hover:bg-subgreen-600
                               sm:py-3.5 disabled:opacity-70">
                    <svg id="recoveryVerifySpinner" aria-hidden="true" class="hidden h-5 w-5 animate-spin fill-white text-white/30" viewBox="0 0 100 101" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z" fill="currentColor"/><path d="M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.7191 9.52689C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z" fill="currentFill"/></svg>
                    <span id="recoveryVerifyBtnText">Verify &amp; continue</span>
                </button>

                <!-- SMALLER HELPER TEXT WITH EMPHASIS -->
                <p class="mt-2 text-xs leading-relaxed text-slate-500 sm:text-sm dark:text-slate-400">
                    <span class="font-semibold text-slate-700 dark:text-slate-200">Single-use:</span>
                    recovery codes work once. After signing in,
                    <span class="font-semibold">generate a new set</span>.
                </p>

            </div>
        </div>


        <!-- OPTION 2 -->
        <div class="rounded-xl border border-slate-200 bg-white p-4 sm:p-5 dark:border-slate-700 dark:bg-slate-900">

            <div class="text-sm font-semibold text-slate-900 sm:text-base dark:text-white">
                Restore authenticator (saved QR / setup key)
            </div>

            <div class="mt-1 text-xs text-slate-600 sm:text-sm dark:text-slate-300">
                If you saved your
                <span class="font-medium text-slate-800 dark:text-slate-100">QR code</span>
                or
                <span class="font-medium text-slate-800 dark:text-slate-100">setup key</span>,
                register on a new device to generate codes again.
            </div>

            <div class="mt-3 rounded-lg border border-slate-200 bg-slate-50 p-3 text-sm text-slate-700
                        sm:p-4 sm:text-sm dark:border-slate-700 dark:bg-slate-800 dark:text-slate-200">
                <ol class="list-decimal space-y-1 pl-4">
                    <li>Install authenticator app.</li>
                    <li>Add account â†’ Scan QR or enter setup key.</li>
                    <li>Return and enter the new 6-digit code.</li>
                </ol>
            </div>

            <div class="mt-4 flex min-w-0 flex-wrap items-center gap-2 sm:gap-3">

                <button type="button"
                        onclick="closeRecovery()"
                        class="flex-1 rounded-lg border border-slate-200 bg-white
                               px-3 py-3 text-xs
                               font-semibold whitespace-nowrap text-slate-700
                               shadow-sm
                               transition hover:bg-slate-50 sm:px-4 sm:py-3.5 sm:text-sm
                               dark:border-slate-700 dark:bg-slate-900 dark:text-slate-200 dark:hover:bg-slate-800">
                    Back to code entry
                </button>

                <button type="button"
                        onclick="simulateRestoredAuthenticator()"
                        class="flex-1 rounded-lg bg-subgreen-500
                               px-3 py-3 text-xs
                               font-semibold whitespace-nowrap text-white
                               shadow-sm
                               transition hover:bg-subgreen-600
                               sm:px-4 sm:py-3.5 sm:text-sm">
                    I restored it
                </button>

            </div>

            <!-- SMALLER HELPER TEXT -->
            <p class="mt-2 text-xs leading-relaxed text-slate-500 sm:text-sm dark:text-slate-400">
                <span class="font-semibold text-slate-700 dark:text-slate-200">
                    No QR/setup key?
                </span>
                use a recovery code or
                <span class="font-semibold">contact support</span>.
            </p>

        </div>


        <!-- OPTION 3 -->
        <div class="rounded-xl border border-slate-200 bg-white p-4 sm:p-5 dark:border-slate-700 dark:bg-slate-900">

            <div class="flex min-w-0 items-start justify-between gap-3">

                <div class="min-w-0">
                    <div class="text-sm font-semibold text-slate-900 sm:text-base dark:text-white">
                        Last resort: contact support
                    </div>
                </div>

                <!-- SMALLER BADGE -->
                <span class="inline-flex items-center rounded-full border border-slate-200
                             bg-slate-50 px-3 py-1.5
                             text-xs font-medium tracking-wide whitespace-nowrap
                             text-slate-600
                             sm:px-3.5 sm:py-1.5 sm:text-sm
                             dark:border-slate-700 dark:bg-slate-800 dark:text-slate-300">
                    Manual
                </span>

            </div>

            <!-- description moved to its own row (prevents being cut by badge on mobile) -->
            <div class="mt-2 text-xs text-slate-600 sm:text-sm dark:text-slate-300">
                Support can help after identity verification.
            </div>

            <div class="mt-3 rounded-lg border border-slate-200 bg-slate-50 p-3 text-xs text-slate-700
                        sm:p-4 sm:text-sm dark:border-slate-700 dark:bg-slate-800 dark:text-slate-200">
                Include email, organization code, and issue description.
            </div>

            <div class="mt-4 flex min-w-0 flex-wrap items-center justify-end gap-2 sm:gap-3">

                <button type="button"
                        onclick="backToLogin()"
                        class="ml-auto rounded-lg
                               px-3 py-3 text-xs
                               font-semibold whitespace-nowrap text-slate-600
                               hover:text-slate-900
                               sm:px-4 sm:py-3.5 sm:text-sm
                               dark:text-slate-300 dark:hover:text-white">
                    Back to sign in
                </button>

                <button type="button"
                        onclick="showSupportInfo()"
                        class="rounded-lg border border-slate-200 bg-white
                               px-3 py-3 text-xs
                               font-semibold whitespace-nowrap text-slate-700
                               shadow-sm
                               transition hover:bg-slate-50 sm:px-4 sm:py-3.5 sm:text-sm
                               dark:border-slate-700 dark:bg-slate-900 dark:text-slate-200 dark:hover:bg-slate-800">
                    Contact support
                </button>

            </div>

            <div id="supportInfo" class="mt-3 hidden text-xs text-slate-600 sm:text-sm dark:text-slate-300">
                Email: <span class="font-semibold">support@subchron.com</span><br />
                Expect identity checks before 2FA reset.
            </div>

        </div>

    </div>
</div>
